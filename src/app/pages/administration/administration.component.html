<div class="text-muted p-3">
    <h2><b>Módulo de Administración y Configuración</b></h2>
    <p>Administración general de los sevicios y edición de variables.</p>
    <hr>
</div>

<ngb-accordion #a="ngbAccordion" activeIds="custom-panel-1">
  <ngb-panel  id="custom-panel-1">
    <ng-template ngbPanelHeader let-opened="opened">
      <div class="accordion-button custom-header justify-content-between" [class.collapsed]="!opened">
        <span><b>Gestión de usuarios</b></span>
        <span>
          <button *ngIf="!opened" ngbPanelToggle class="btn btn-sm btn-outline-primary ms-2"><i class="fas fa-eye"></i></button>
          <button *ngIf="opened" ngbPanelToggle class="btn btn-sm btn-outline-primary ms-2"><i class="fas fa-eye-slash"></i></button>
          <!-- <button class="btn btn-sm btn-outline-primary ms-2" (click)="refrescarUsuarios()"><i class="fa fa-refresh"></i></button> -->
          <button class="btn btn-sm btn-outline-success ms-2" data-bs-toggle="modal" data-bs-target="#newUser"><i class="fas fa-user-plus"></i></button>
        </span>
      </div>
    </ng-template>
    <ng-template *ngIf="refrescarUsers" ngbPanelContent>
      <app-users></app-users>
    </ng-template>
  </ngb-panel>

  <ngb-panel>
    <ng-template ngbPanelHeader let-opened="opened">
      <div class="accordion-button custom-header justify-content-between" [class.collapsed]="!opened">
        <span><b>Cambio de contraseña</b></span>
        <span>
          <button *ngIf="!opened" ngbPanelToggle class="btn btn-sm btn-outline-primary ms-2" (click)="cambiarActVal(0)"><i class="fas fa-eye"></i></button>
          <button *ngIf="opened" ngbPanelToggle class="btn btn-sm btn-outline-primary ms-2" (click)="cambiarActVal(0)"><i class="fas fa-eye-slash"></i></button>
        </span>
      </div>
    </ng-template>
    <ng-template ngbPanelContent>
      <app-update-password></app-update-password>
    </ng-template>
  </ngb-panel>

  <ngb-panel>
    <ng-template ngbPanelHeader let-opened="opened">
      <div class="accordion-button custom-header justify-content-between" [class.collapsed]="!opened">
        <span><b>Bitacora</b></span>
        <span>
          <button *ngIf="!opened" ngbPanelToggle class="btn btn-sm btn-outline-primary ms-2"><i class="fas fa-eye"></i></button>
          <button *ngIf="opened" ngbPanelToggle class="btn btn-sm btn-outline-primary ms-2"><i class="fas fa-eye-slash"></i></button>
          <button class="btn btn-sm btn-outline-success ms-2" data-bs-toggle="modal" data-bs-target="#backup"><i class="fas fa-download"></i></button>
        </span>
      </div>
    </ng-template>
    <ng-template ngbPanelContent>
      <app-binnacle></app-binnacle>
    </ng-template>
  </ngb-panel>


  <ngb-panel id="custom-panel-2">
    <ng-template ngbPanelHeader let-opened="opened">
      <div class="accordion-button custom-header justify-content-between" [class.collapsed]="!opened">
        <span><b>Configuración de acceso al sistema</b></span>
        <span>
          <button *ngIf="!opened" ngbPanelToggle class="btn btn-sm btn-outline-primary ms-2"><i class="fas fa-eye"></i></button>
          <button *ngIf="opened" ngbPanelToggle class="btn btn-sm btn-outline-primary ms-2"><i class="fas fa-eye-slash"></i></button>
          <button class="btn btn-sm btn-outline-primary ms-2" (click)="refrescarBitacora()"><i class="fa fa-refresh"></i></button>
        </span>
      </div>
    </ng-template>
    <ng-template ngbPanelContent>
      <div class="row justify-content-between">
        <div class="col-12 row">
          <app-objects></app-objects>
        </div>
        <div class="col-12 row">
          <app-roles></app-roles>
        </div>
        <div class="col-12 pt-4">
          <app-permissions></app-permissions>
        </div>
      </div>
    </ng-template>
  </ngb-panel>
</ngb-accordion>

<!--Modal nuevo usuario-->
<div class="modal lg fade" id="newUser" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-hidden="false">
  <div class="modal-dialog modal-dialog-centered modal-xl">
      <div class="modal-content">
          <div class="modal-header d-flex justify-content-between" style="text-align: center; display: block;">
              <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
          </div>
          <div class="modal-body p-0">
            <app-signup-admon></app-signup-admon>
          </div>
          <div class="row">
              <p class="text-muted text-center">Guardar nuevo usuario, Maelcon S de R. L.</p>
          </div>
      </div>
  </div>
</div>

